let products=[
    {
        id : 1,
        name : "Tomato",
        category:"vegetables",
        image:"/FreshCart/vegetable/tomato.png",
        quantity:"500g",
        price:160,
        discount:"2% Discount"

    },
    {
        id : 2,
        name : "Apple",
        category:"fruits",
        image:"/FreshCart/fruits/apple.jpg",
        quantity:"100g",
        price:160,
        discount:"2% Discount"

    },
    {
        id : 3,
        name : "Raddish",
        category:"vegetables",
        image:"/FreshCart/vegetable/raddish.jpg",
        quantity:"100g",
        price:160,
        discount:"2% Discount"

    },
    {
        id : 4,
        name : "Pumpkin",
        category:"vegetables",
        image:"/FreshCart/vegetable/pumpkin.jpg",
        quantity:"100g",
        price:160,
        discount:"2% Discount"

    },
    {
        id : 5,
        name : "Banana Chips",
        category:"snacks",
        image:"/FreshCart/snacks/bananachips.jpg",
        quantity:"500g",
        price:100,
        discount:"12% Discount"

    },
    {
        id : 6,
        name : "Peas",
        category:"vegetables",
        image:"/FreshCart/vegetable/peas.png",
        quantity:"100g",
        price:160,
        discount:"2% Discount"

    },
    {
        id : 7,
        name : "Banana",
        category:"fruits",
        image:"/FreshCart/fruits/banana.jpg",
        quantity:"100g",
        price:160,
        discount:"2% Discount"

    },
    {
        id : 8,
        name : "Onion",
        category:"vegetables",
        image:"/FreshCart/vegetable/Onion.jpg",
        quantity:"100g",
        price:160,
        discount:"2% Discount"

    },
    {
        id : 9,
        name : "Chakli",
        category:"snacks",
        image:"/FreshCart/snacks/chakli.jpg",
        quantity:"500g",
        price:160,
        discount:"20% Discount"

    },
    {
        id : 10,
        name : "Lemon",
        category:"vegetables",
        image:"/FreshCart/vegetable/lemon.jpg",
        quantity:"100g",
        price:160,
        discount:"2% Discount"

    },
    {
        id : 11,
        name : "Blueberry",
        category:"fruits",
        image:"/FreshCart/fruits/bluberry.png",
        quantity:"100g",
        price:160,
        discount:"2% Discount"

    },
    {
        id : 12,
        name : "Ladyfinger",
        category:"vegetables",
        image:"/FreshCart/vegetable/ladyfinger.jpg",
        quantity:"100g",
        price:160,
        discount:"2% Discount"

    },
    {
        id : 13,
        name : "Grapes",
        category:"fruits",
        image:"/FreshCart/fruits/grapes.png",
        quantity:"100g",
        price:160,
        discount:"2% Discount"

    },
    {
        id : 14,
        name : "Guava",
        category:"fruits",
        image:"/FreshCart/fruits/guava.jpg",
        quantity:"100g",
        price:160,
        discount:"2% Discount"

    },
    {
        id : 15,
        name : "Garlic",
        category:"vegetables",
        image:"/FreshCart/vegetable/garlic.jpg",
        quantity:"100g",
        price:160,
        discount:"2% Discount"

    },
    {
        id : 16,
        name : "Ice Apple",
        category:"fruits",
        image:"/FreshCart/fruits/ice apple.png",
        quantity:"100g",
        price:160,
        discount:"2% Discount"

    },
    {
        id : 17,
        name : "Jackfruit",
        category:"fruits",
        image:"/FreshCart/fruits/Jackfruit.jpg",
        quantity:"100g",
        price:160,
        discount:"2% Discount"

    },
    {
        id : 18,
        name : "Drumstick",
        category:"vegetables",
        image:"/FreshCart/vegetable/drumstick.jpg",
        quantity:"100g",
        price:160,
        discount:"2% Discount"

    },
    {
        id : 19,
        name : "Kodbale",
        category:"snacks",
        image:"/FreshCart/snacks/kodbale.jpg",
        quantity:"500g",
        price:160,
        discount:"12% Discount"

    },
    {
        id : 20,
        name : "Kiwi",
        category:"fruits",
        image:"/FreshCart/fruits/kiwi.jpg",
        quantity:"100g",
        price:160,
        discount:"2% Discount"

    },
    {
        id : 21,
        name : "Cucumber",
        category:"vegetables",
        image:"/FreshCart/vegetable/cucumber.jpg",
        quantity:"100g",
        price:160,
        discount:"2% Discount"

    },
    {
        id : 22,
        name : "Popcorn",
        category:"snacks",
        image:"/FreshCart/snacks/popcorn.jpg",
        quantity:"50g",
        price:60,
        discount:"2% Discount"

    },
    {
        id : 23,
        name : "Corn",
        category:"vegetables",
        image:"/FreshCart/vegetable/corn.jpg",
        quantity:"100g",
        price:160,
        discount:"2% Discount"

    },
    {
        id : 24,
        name : "Mango",
        category:"fruits",
        image:"/FreshCart/fruits/mango.jpg",
        quantity:"100g",
        price:160,
        discount:"2% Discount"

    },
    {
        id : 25,
        name : "Potato Chips",
        category:"snacks",
        image:"/FreshCart/snacks/potatochips.jpg",
        quantity:"100g",
        price:50,
        discount:"8% Discount"

    },
    {
        id : 26,
        name : "Chow Chow",
        category:"vegetables",
        image:"/FreshCart/vegetable/chowchow.jpg",
        quantity:"100g",
        price:160,
        discount:"2% Discount"

    },
    {
        id : 27,
        name : "Papaya",
        category:"fruits",
        image:"/FreshCart/fruits/papaya.jpg",
        quantity:"100g",
        price:160,
        discount:"2% Discount"

    },
    {
        id : 28,
        name : "Promogonate",
        category:"fruits",
        image:"/FreshCart/fruits/promogonate.jpg",
        quantity:"100g",
        price:160,
        discount:"2% Discount"

    },
    {
        id : 29,
        name : "capsicum",
        category:"vegetables",
        image:"/FreshCart/vegetable/capsicum.jpg",
        quantity:"100g",
        price:160,
        discount:"2% Discount"

    },
    {
        id : 30,
        name : "Raw Mango",
        category:"fruits",
        image:"/FreshCart/fruits/rawmango.jpg",
        quantity:"100g",
        price:160,
        discount:"2% Discount"

    },
    {
        id : 31,
        name : "Waffer",
        category:"snacks",
        image:"/FreshCart/snacks/waffer.jpg",
        quantity:"100g",
        price:100,
        discount:"22% Discount"

    },
    {
        id : 32,
        name : "Cabbage",
        category:"vegetables",
        image:"/FreshCart/vegetable/cabbage.jpg",
        quantity:"100g",
        price:160,
        discount:"2% Discount"

    },
    {
        id : 33,
        name : "Strawberry",
        category:"fruits",
        image:"/FreshCart/fruits/strawberry.jpg",
        quantity:"100g",
        price:160,
        discount:"2% Discount"

    },
    {
        id : 34,
        name : "Broccoli",
        category:"vegetables",
        image:"/FreshCart/vegetable/broccoli.jpg",
        quantity:"100g",
        price:160,
        discount:"2% Discount"

    },
    {
        id : 35,
        name : "Bell peppers",
        category:"vegetables",
        image:"/FreshCart/vegetable/bell peppers.jpg",
        quantity:"500g",
        price:70,
        discount:"10% Discount"

    },
    {
        id : 37,
        name : "Beans",
        category:"vegetables",
        image:"/FreshCart/vegetable/beans.jpg",
        quantity:"250g",
        price:60,
        discount:"10% Discount"

    }
]

console.log(products)
let Productlist = document.getElementById('prodlist')
console.log(Productlist)

if (Productlist) {
    displayProducts(products)
    let filter = document.querySelectorAll('.filter')
    console.log(filter)
    filter.forEach((btn)=>{
        console.log(btn)
        btn.addEventListener('click',(e)=>{
        let category = e.target.dataset.category;
        console.log(category)
        if (category === "all") {
            displayProducts(products)
        }else{
            let FilterData = products.filter((p)=>{
                return p.category === category
            })
            console.log(FilterData)
            displayProducts(FilterData)
        }
        })
    })
}
function displayProducts(item){
    Productlist.innerHTML = item.map((p)=>{
        console.log(p)
        return `
        <aside class="productdes">
            <img src="${p.image}" alt="">
            <h1>${p.name}</h1>
            <h6>${p.quantity}</h6>
            <p>${p.price}</p>
            <p>${p.discount}</p>
            <button onclick="addtocart(${p.id})">Add to Cart</button>
        </aside>
        `;
    })
}

function addtocart(id) {
    let cart = JSON.parse(localStorage.getItem('cart')) || []
    let Productsdata = products.find((p)=>{
        return p.id === id;
    })
    cart.push(Productsdata)
    localStorage.setItem("cart",JSON.stringify(cart))
    alert(`${Productsdata.name} added to cart`)
    console.log(cart)
    updateCartItems()
}
function updateCartItems() {
    let cart = JSON.parse(localStorage.getItem('cart')) || []
    let cartTotal = document.getElementById('cartTotal')
    console.log(cartTotal)
    cartTotal.textContent = `${cart.length}`
}
updateCartItems()

let cartItems = document.getElementById('cartItems')
console.log(cartItems)
if(cartItems){
    let CartContainer = JSON.parse(localStorage.getItem('cart')) || []
    let total = 0;
    cartItems.innerHTML = CartContainer.map((item)=>{
        total+=item.price
        console.log(total)
        return `<article>${item.name} ₹ ${item.price}/-</article>`
    }).join("");

    let totalbill = document.getElementById('totalbill')
    totalbill.textContent = `Total Bill : ₹${total}`

    let clearcart = document.getElementById('clearcart')
    console.log(clearcart)
        clearcart.onclick=()=>{
        CartContainer = []
        localStorage.setItem("cart",JSON.stringify(CartContainer))
        window.location.href="./HomePage.html"
    }

    let checkout = document.getElementById('checkout')
    console.log(checkout)
    checkout.onclick = ()=>{
        alert(`Thank You for Shopping at FreshCart and your TotalBill is ₹ ${total}!!!`)
        CartContainer = []
        localStorage.setItem("cart",JSON.stringify(CartContainer))
        window.location.href="./HomePage.html"
    }
}